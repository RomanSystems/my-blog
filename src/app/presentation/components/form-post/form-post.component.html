<mat-card>
  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div formGroupName="source">
      <mat-form-field appearance="fill" class="full-width">
        <mat-label>ID Fuente</mat-label>
        <input matInput formControlName="id" />
        @if(form.get('source.id')?.invalid && (form.get('source.id')?.touched)) {
          <mat-error>
            @if(form.get('source.id')?.errors?.['required']) { ID es obligatorio }
            @if(form.get('source.id')?.errors?.['minlength']) { Mínimo 3 caracteres }
          </mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="fill" class="full-width">
        <mat-label>Nombre Fuente</mat-label>
        <input matInput formControlName="name" />
        @if(form.get('source.name')?.invalid && (form.get('source.name')?.touched)) {
          <mat-error>
            @if(form.get('source.name')?.errors?.['required']) { Nombre es obligatorio }
            @if(form.get('source.name')?.errors?.['minlength']) { Mínimo 3 caracteres }
          </mat-error>
        }
      </mat-form-field>
    </div>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Autor</mat-label>
      <input matInput formControlName="author" />
      @if(form.get('author')?.invalid && (form.get('author')?.touched)) {
        <mat-error>
          @if(form.get('author')?.errors?.['required']) { Autor es obligatorio }
          @if(form.get('author')?.errors?.['minlength']) { Mínimo 3 caracteres }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Título</mat-label>
      <input matInput formControlName="title" />
      @if(form.get('title')?.invalid && (form.get('title')?.touched)) {
        <mat-error>
          @if(form.get('title')?.errors?.['required']) { Título es obligatorio }
          @if(form.get('title')?.errors?.['minlength']) { Mínimo 3 caracteres }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="description"></textarea>
      @if(form.get('description')?.invalid && (form.get('description')?.touched)) {
        <mat-error>
          @if(form.get('description')?.errors?.['required']) { Descripción es obligatoria }
          @if(form.get('description')?.errors?.['minlength']) { Mínimo 10 caracteres }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>URL</mat-label>
      <input matInput type="url" formControlName="url" />
      @if(form.get('url')?.invalid && (form.get('url')?.touched)) {
        <mat-error>
          @if(form.get('url')?.errors?.['required']) { URL es obligatoria }
          @if(form.get('url')?.errors?.['pattern']) { URL inválida }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Imagen (URL)</mat-label>
      <input matInput type="url" formControlName="urlToImage" />
      @if(form.get('urlToImage')?.invalid && (form.get('urlToImage')?.touched)) {
        <mat-error>
          @if(form.get('urlToImage')?.errors?.['required']) { URL de imagen es obligatoria }
          @if(form.get('urlToImage')?.errors?.['pattern']) { URL inválida }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Publicado en</mat-label>
      <input matInput type="datetime-local" formControlName="publishedAt" />
      @if(form.get('publishedAt')?.invalid && (form.get('publishedAt')?.touched)) {
        <mat-error>
          @if(form.get('publishedAt')?.errors?.['required']) { Fecha es obligatoria }
        </mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="fill" class="full-width">
      <mat-label>Contenido</mat-label>
      <textarea matInput formControlName="content"></textarea>
      @if(form.get('content')?.invalid && (form.get('content')?.touched)) {
        <mat-error>
          @if(form.get('content')?.errors?.['required']) { Contenido es obligatorio }
          @if(form.get('content')?.errors?.['minlength']) { Mínimo 10 caracteres }
        </mat-error>
      }
    </mat-form-field>

    <div class="buttons-card">
      <button mat-raised-button color="primary" (click)="cancel()">Cancelar</button>
      <button mat-raised-button color="primary" type="submit">Publicar</button>
    </div>
  </form>
</mat-card>
